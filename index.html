<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>帥華物理教室 - 摩擦力與加速度模擬</title>
    <style>
        body { font-family: "Microsoft JhengHei", sans-serif; background: #eceff1; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .card { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); width: 100%; max-width: 750px; }
        h1 { color: #1976D2; text-align: center; }
        canvas { background: #fafafa; border: 1.5px solid #ccc; border-radius: 8px; width: 100%; height: auto; display: block; margin: 0 auto; }
        .controls { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 25px; padding: 20px; background: #f1f8e9; border-radius: 12px; }
        .status { margin-top: 20px; display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .box { padding: 15px; border-radius: 8px; text-align: center; font-weight: bold; border: 1px solid transparent; }
        .slipping { background: #ffebee; color: #c62828; border-color: #ef9a9a; }
        .stable { background: #e8f5e9; color: #2e7d32; border-color: #a5d6a7; }
        .btn-group { display: flex; justify-content: center; gap: 15px; margin-top: 20px; }
        button { padding: 12px 24px; border: none; border-radius: 6px; font-size: 16px; font-weight: bold; cursor: pointer; background: #2196F3; color: white; transition: 0.2s; }
        button:hover { background: #1976D2; transform: translateY(-2px); }
    </style>
</head>
<body>

<div class="card">
    <h1>帥華物理教室：疊塊模擬器</h1>
    <canvas id="canvas" width="700" height="300"></canvas>
    <div class="controls">
        <div>
            <label>水平拉力 <b>F = <span id="fv">36</span> N</b></label>
            <input type="range" id="fr" min="0" max="100" value="36" style="width:100%">
        </div>
        <div>
            <label>靜摩擦係數 <b>μs = <span id="mv">0.5</span></b></label>
            <input type="range" id="mr" min="0.1" max="1.0" step="0.05" value="0.5" style="width:100%">
        </div>
    </div>
    <div class="status">
        <div id="st" class="box">計算中...</div>
        <div id="acc" class="box" style="background:#e3f2fd; color:#0d47a1; border-color:#90caf9;">加速度...</div>
    </div>
    <div class="btn-group">
        <button onclick="run = !run">▶ 開始 / 暫停模擬</button>
        <button onclick="x=100; v=0; run=false;" style="background:#607d8b;">↺ 重置</button>
    </div>
</div>

<script>
    const cvs = document.getElementById('canvas'), ctx = cvs.getContext('2d');
    const mA = 2, mB = 10, g = 10;
    let x = 100, v = 0, run = false;

    function update() {
        const F = parseFloat(document.getElementById('fr').value);
        const mu = parseFloat(document.getElementById('mr').value);
        document.getElementById('fv').innerText = F;
        document.getElementById('mv').innerText = mu;

        const fsMax = mu * mA * g;
        const a = F / (mA + mB);
        const fsN = mA * a;
        const slip = fsN > fsMax;

        const st = document.getElementById('st');
        if (slip) {
            st.className = 'box slipping';
            st.innerHTML = `⚠️ 發生打滑！<br>fs 已達上限 ${fsMax}N`;
        } else {
            st.className = 'box stable';
            st.innerHTML = `✅ 保持靜止<br>摩擦力 fs: ${fsN.toFixed(1)}N`;
        }
        document.getElementById('acc').innerHTML = `系統加速度<br>${a.toFixed(2)} m/s²`;

        ctx.clearRect(0, 0, 700, 300);
        ctx.strokeStyle = '#333'; ctx.lineWidth = 2;
        ctx.beginPath(); ctx.moveTo(0, 250); ctx.lineTo(700, 250); ctx.stroke();
        ctx.fillStyle = '#90caf9'; ctx.fillRect(x, 170, 160, 80); // B
        ctx.fillStyle = '#ffcc80'; ctx.fillRect(x + 40, 110, 80, 60); // A
        
        const fsD = slip ? fsMax : fsN;
        drawA(x + 160, 210, x + 160 + F, 210, '#f44336', 'F');
        drawA(x + 80, 170, x + 80 + fsD * 3, 170, '#2196F3', 'fs');

        if (run) { v += a * 0.016; x += v; if (x > 650) { x = -200; v = 0; } }
        requestAnimationFrame(update);
    }

    function drawA(x1, y1, x2, y2, c, l) {
        if (x1 === x2) return;
        ctx.strokeStyle = ctx.fillStyle = c;
        ctx.beginPath(); ctx.moveTo(x1, y1); ctx.lineTo(x2, y2); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(x2, y2); ctx.lineTo(x2-8, y2-5); ctx.lineTo(x2-8, y2+5); ctx.fill();
        ctx.fillText(l, x2 + 5, y2 + 5);
    }
    update();
</script>
</body>
</html>